<!-- Utils Documentation -->
<div class="space-y-8">
  
  <!-- Introduction -->
  <div class="bg-gradient-to-r from-cyan-50 to-blue-50 p-6 rounded-lg border border-cyan-200">
    <h2 class="text-2xl font-bold text-cyan-900 mb-3">üîß Utils Reference</h2>
    <p class="text-cyan-800 mb-4">Utility partials and helper functions for common functionality like analytics, content relationships, and link building. These tools enhance your site's functionality and user experience.</p>
    <div class="bg-cyan-100 p-3 rounded border border-cyan-300">
      <p class="text-sm text-cyan-800"><strong>üí° Tip:</strong> Utils are typically called internally by other partials or used in layouts, but understanding them helps you customize behavior and add advanced functionality.</p>
    </div>
  </div>

  <!-- Analytics -->
  <div class="bg-background-alt p-6 rounded-lg border">
    <h3 class="text-xl font-semibold mb-4 text-purple-700">üìä Analytics</h3>
    <p class="text-text-light mb-4">Privacy-compliant analytics integration with consent management and tracking configuration.</p>
    
    <div class="space-y-6">
      <!-- Google Analytics Consent -->
      <div class="bg-background p-4 rounded border">
        <h4 class="font-medium mb-3">Google Analytics with Consent</h4>
        <p class="text-text-light text-sm mb-4">GDPR-compliant Google Analytics implementation with consent management and privacy controls.</p>
        
        <div class="mb-4">
          <h5 class="font-medium mb-2">Usage:</h5>
          <pre class="text-sm overflow-x-auto bg-gray-100 p-3 rounded"><code>{{ `{{ partial "utils/analytics/google-analytics-consent.html" (dict 
  "measurement_id" "G-XXXXXXXXXX"
  "consent_mode" true
  "anonymize_ip" true
  "cookie_domain" "auto"
  "cookie_expires" 63072000
  "debug_mode" false
) }}` }}</code></pre>
        </div>

        <div class="bg-gray-50 p-4 rounded">
          <h5 class="font-medium mb-2">Parameters:</h5>
          <div class="space-y-2">
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">measurement_id</code>
              <span class="text-xs text-gray-600 ml-2">Your GA4 Measurement ID</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">consent_mode</code>
              <span class="text-xs text-gray-600 ml-2">Enable Google Consent Mode v2</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">anonymize_ip</code>
              <span class="text-xs text-gray-600 ml-2">Anonymize visitor IP addresses</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">cookie_domain</code>
              <span class="text-xs text-gray-600 ml-2">Cookie domain setting</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">cookie_expires</code>
              <span class="text-xs text-gray-600 ml-2">Cookie expiration in seconds</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">debug_mode</code>
              <span class="text-xs text-gray-600 ml-2">Enable debug mode for testing</span>
            </div>
          </div>
        </div>

        <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded">
          <p class="text-sm text-yellow-700">
            <strong>Privacy Note:</strong> This implementation includes consent mode for GDPR compliance. Ensure you have a proper cookie consent banner that updates the consent state.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Content Utils -->
  <div class="bg-background-alt p-6 rounded-lg border">
    <h3 class="text-xl font-semibold mb-4 text-green-700">üìù Content Utilities</h3>
    <p class="text-text-light mb-4">Helper functions for content discovery, relationship building, and dynamic content generation.</p>
    
    <div class="space-y-6">
      <!-- Related Content -->
      <div class="bg-background p-4 rounded border">
        <h4 class="font-medium mb-3">Related Content</h4>
        <p class="text-text-light text-sm mb-4">Automatically find and display related content based on tags, categories, or custom criteria.</p>
        
        <div class="mb-4">
          <h5 class="font-medium mb-2">Usage:</h5>
          <pre class="text-sm overflow-x-auto bg-gray-100 p-3 rounded"><code>{{ `{{ partial "related_content.html" (dict
  "page" .
  "limit" 3
  "match_tags" true
  "match_categories" true
  "exclude_current" true
  "sort_by" "date"
  "template" "card"
) }}` }}</code></pre>
        </div>

        <div class="bg-gray-50 p-4 rounded mb-4">
          <h5 class="font-medium mb-2">Parameters:</h5>
          <div class="space-y-2">
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">page</code>
              <span class="text-xs text-gray-600 ml-2">Current page context (usually .)</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">limit</code>
              <span class="text-xs text-gray-600 ml-2">Maximum number of related items</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">match_tags</code>
              <span class="text-xs text-gray-600 ml-2">Match by tags</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">match_categories</code>
              <span class="text-xs text-gray-600 ml-2">Match by categories</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">exclude_current</code>
              <span class="text-xs text-gray-600 ml-2">Exclude current page from results</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">sort_by</code>
              <span class="text-xs text-gray-600 ml-2">"date", "title", "weight", or "publishdate"</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">template</code>
              <span class="text-xs text-gray-600 ml-2">"card", "list", or "minimal"</span>
            </div>
          </div>
        </div>

        <div class="bg-blue-50 p-3 rounded border border-blue-200">
          <h5 class="font-medium mb-2 text-blue-800">Example Output:</h5>
          <div class="space-y-2">
            <div class="bg-white p-3 rounded border">
              <div class="flex items-start space-x-3">
                <div class="w-16 h-16 bg-gray-200 rounded"></div>
                <div>
                  <h6 class="font-medium text-sm">Building AI Workflows with FlowHunt</h6>
                  <p class="text-xs text-gray-600 mt-1">Learn how to create powerful automation workflows using our drag-and-drop interface...</p>
                  <span class="text-xs text-blue-600 mt-2 inline-block">Read more ‚Üí</span>
                </div>
              </div>
            </div>
            <div class="text-xs text-gray-500 text-center">Example related content card</div>
          </div>
        </div>
      </div>

      <!-- Link Building -->
      <div class="bg-background p-4 rounded border">
        <h4 class="font-medium mb-3">Link Building</h4>
        <p class="text-text-light text-sm mb-4">Intelligent link generation with proper attributes, tracking, and SEO optimization.</p>
        
        <div class="mb-4">
          <h5 class="font-medium mb-2">Usage:</h5>
          <pre class="text-sm overflow-x-auto bg-gray-100 p-3 rounded"><code>{{ `{{ partial "utils/linkbuilding.html" (dict 
  "url" "https://example.com"
  "text" "Learn More"
  "class" "text-blue-600 hover:text-blue-800"
  "external" true
  "nofollow" false
  "track_clicks" true
  "track_category" "outbound"
  "track_label" "footer-link"
) }}` }}</code></pre>
        </div>

        <div class="bg-gray-50 p-4 rounded mb-4">
          <h5 class="font-medium mb-2">Parameters:</h5>
          <div class="space-y-2">
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">url</code>
              <span class="text-xs text-gray-600 ml-2">Link destination URL</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">text</code>
              <span class="text-xs text-gray-600 ml-2">Link text content</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">class</code>
              <span class="text-xs text-gray-600 ml-2">CSS classes to apply</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">external</code>
              <span class="text-xs text-gray-600 ml-2">Add target="_blank" and security attrs</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">nofollow</code>
              <span class="text-xs text-gray-600 ml-2">Add rel="nofollow" attribute</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">track_clicks</code>
              <span class="text-xs text-gray-600 ml-2">Enable click tracking</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">track_category</code>
              <span class="text-xs text-gray-600 ml-2">Analytics event category</span>
            </div>
            <div class="flex justify-between items-start">
              <code class="text-sm font-mono bg-white px-2 py-1 rounded">track_label</code>
              <span class="text-xs text-gray-600 ml-2">Analytics event label</span>
            </div>
          </div>
        </div>

        <div class="bg-green-50 p-3 rounded border border-green-200">
          <h5 class="font-medium mb-2 text-green-800">Generated Link Examples:</h5>
          <div class="space-y-2 text-sm">
            <div class="bg-white p-2 rounded font-mono text-xs">
              <strong>Internal Link:</strong><br>
              <code>&lt;a href="/features" class="text-blue-600"&gt;Learn More&lt;/a&gt;</code>
            </div>
            <div class="bg-white p-2 rounded font-mono text-xs">
              <strong>External Link:</strong><br>
              <code>&lt;a href="https://example.com" target="_blank" rel="noopener noreferrer" class="text-blue-600"&gt;Learn More&lt;/a&gt;</code>
            </div>
            <div class="bg-white p-2 rounded font-mono text-xs">
              <strong>Tracked Link:</strong><br>
              <code>&lt;a href="/signup" onclick="gtag('event', 'click', {category: 'cta', label: 'header-signup'})"&gt;Sign Up&lt;/a&gt;</code>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Integration Examples -->
  <div class="bg-background-alt p-6 rounded-lg border">
    <h3 class="text-xl font-semibold mb-4 text-blue-700">üîó Integration Examples</h3>
    <p class="text-text-light mb-4">Common ways to use utils partials in your layouts and content.</p>
    
    <div class="space-y-6">
      <!-- In Layout Templates -->
      <div class="bg-background p-4 rounded border">
        <h4 class="font-medium mb-3">In Layout Templates</h4>
        <p class="text-text-light text-sm mb-4">Add analytics and enhanced links to your base layouts.</p>
        
        <pre class="text-sm overflow-x-auto bg-gray-100 p-3 rounded"><code>{{ `<!-- In baseof.html or head.html -->
{{ if site.GoogleAnalytics }}
  {{ partial "utils/analytics/google-analytics-consent.html" (dict 
    "measurement_id" site.GoogleAnalytics
    "consent_mode" true
    "anonymize_ip" true
  ) }}
{{ end }}

<!-- In footer.html -->
<footer>
  <div class="space-y-4">
    {{ range .Site.Menus.footer }}
      {{ partial "utils/linkbuilding.html" (dict 
        "url" .URL
        "text" .Name
        "class" "text-gray-400 hover:text-white"
        "track_clicks" true
        "track_category" "footer"
        "track_label" .Name
      ) }}
    {{ end }}
  </div>
</footer>` }}</code></pre>
      </div>

      <!-- In Content Templates -->
      <div class="bg-background p-4 rounded border">
        <h4 class="font-medium mb-3">In Content Templates</h4>
        <p class="text-text-light text-sm mb-4">Enhance blog posts and pages with related content and smart links.</p>
        
        <pre class="text-sm overflow-x-auto bg-gray-100 p-3 rounded"><code>{{ `<!-- In single.html or blog post template -->
<article>
  {{ .Content }}
  
  <!-- Add related content at the end -->
  <aside class="mt-12 border-t pt-8">
    <h3 class="text-xl font-bold mb-6">Related Articles</h3>
    {{ partial "related_content.html" (dict
      "page" .
      "limit" 3
      "match_tags" true
      "template" "card"
    ) }}
  </aside>
</article>

<!-- In list templates -->
{{ range .Pages }}
  <div class="border-b pb-6 mb-6">
    <h2>{{ .Title }}</h2>
    <p>{{ .Summary }}</p>
    {{ partial "utils/linkbuilding.html" (dict 
      "url" .Permalink
      "text" "Read more"
      "class" "text-blue-600 font-medium"
      "track_clicks" true
      "track_category" "blog"
      "track_label" .Title
    ) }}
  </div>
{{ end }}` }}</code></pre>
      </div>

      <!-- In Shortcodes -->
      <div class="bg-background p-4 rounded border">
        <h4 class="font-medium mb-3">In Custom Shortcodes</h4>
        <p class="text-text-light text-sm mb-4">Create reusable shortcodes that leverage utils for enhanced functionality.</p>
        
        <pre class="text-sm overflow-x-auto bg-gray-100 p-3 rounded"><code>{{ `<!-- Create shortcode: layouts/shortcodes/cta-button.html -->
{{ partial "utils/linkbuilding.html" (dict 
  "url" (.Get "url")
  "text" (.Get "text")
  "class" (printf "inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 %s" (.Get "class" | default ""))
  "external" (.Get "external" | default false)
  "track_clicks" true
  "track_category" "cta"
  "track_label" (.Get "text")
) }}

<!-- Usage in content -->
{{</* cta-button url="/signup" text="Start Free Trial" class="text-lg" */>}}` }}</code></pre>
      </div>
    </div>
  </div>

  <!-- Performance & SEO Tips -->
  <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-lg border border-yellow-200">
    <h3 class="text-xl font-semibold mb-4 text-yellow-800">‚ö° Performance & SEO Tips</h3>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="space-y-4">
        <div class="bg-white p-4 rounded border">
          <h4 class="font-medium mb-2 text-green-700">üöÄ Performance</h4>
          <ul class="text-sm space-y-1 text-green-600">
            <li>‚Ä¢ Load analytics scripts asynchronously</li>
            <li>‚Ä¢ Use consent mode to reduce initial load</li>
            <li>‚Ä¢ Cache related content queries when possible</li>
            <li>‚Ä¢ Minimize DOM queries in link building</li>
            <li>‚Ä¢ Consider lazy loading for related content</li>
          </ul>
        </div>
        
        <div class="bg-white p-4 rounded border">
          <h4 class="font-medium mb-2 text-orange-700">üìä Analytics</h4>
          <ul class="text-sm space-y-1 text-orange-600">
            <li>‚Ä¢ Set up conversion goals in GA4</li>
            <li>‚Ä¢ Track meaningful user interactions</li>
            <li>‚Ä¢ Use consistent event naming</li>
            <li>‚Ä¢ Monitor Core Web Vitals impact</li>
          </ul>
        </div>
      </div>
      
      <div class="space-y-4">
        <div class="bg-white p-4 rounded border">
          <h4 class="font-medium mb-2 text-blue-700">üîç SEO</h4>
          <ul class="text-sm space-y-1 text-blue-600">
            <li>‚Ä¢ Use descriptive link text</li>
            <li>‚Ä¢ Add nofollow to affiliate/promotional links</li>
            <li>‚Ä¢ Ensure internal links use relative URLs</li>
            <li>‚Ä¢ Implement proper link hierarchy</li>
            <li>‚Ä¢ Use related content to increase dwell time</li>
          </ul>
        </div>
        
        <div class="bg-white p-4 rounded border">
          <h4 class="font-medium mb-2 text-purple-700">üõ°Ô∏è Privacy</h4>
          <ul class="text-sm space-y-1 text-purple-600">
            <li>‚Ä¢ Implement consent management</li>
            <li>‚Ä¢ Anonymize IP addresses</li>
            <li>‚Ä¢ Provide opt-out mechanisms</li>
            <li>‚Ä¢ Document data collection practices</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>

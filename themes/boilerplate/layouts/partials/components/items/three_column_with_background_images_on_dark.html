{{/*
@component: Three Column With Background Images on Dark
@description: Displays content in a three-column grid layout with large background images, gradient overlays, and author information on a dark background with decorative elements.
@params:
  - bgColor: Background color class (optional, default: "bg-gray-900")
  - padding: Padding classes (optional, default: "py-24 sm:py-32")
  - heading: Section heading text (optional, default: "From the blog")
  - headingColor: Heading text color (optional, default: "text-white")
  - description: Section description text (optional, default: "Learn how to grow your business with our expert advice.")
  - descriptionColor: Description text color (optional, default: "text-gray-300")
  - centerHeading: Whether to center the heading and description (optional, default: true)
  - cardBgColor: Card background color class (optional, default: "bg-gray-800")
  - cardPadding: Card padding classes (optional, default: "px-8 pt-80 pb-8 sm:pt-48 lg:pt-80")
  - gradientOverlay: Gradient overlay class for images (optional, default: "bg-gradient-to-t from-gray-900 via-gray-900/40")
  - ringColor: Ring color class (optional, default: "ring-white/10")
  - titleColor: Item title color (optional, default: "text-white")
  - dateColor: Date text color (optional, default: "text-gray-300")
  - authorColor: Author name color (optional, default: "text-gray-300")
  - authorImageBg: Author image background color (optional, default: "bg-white/10")
  - items: Array of item objects, each with:
    - image: URL to the background image (required)
    - imageAlt: Alt text for the image (optional)
    - date: ISO date for datetime attribute (optional)
    - dateDisplay: Formatted date string (optional)
    - title: Item title (required)
    - titleLink: URL for the title (required)
    - authorImage: URL to the author's image (optional)
    - authorName: Author's name (optional)
@example:
  {{ partial "components/items/three_column_with_background_images_on_dark.html" (dict 
      "heading" "Featured Stories"
      "description" "Explore our handpicked stories from around the world"
      "cardBgColor" "bg-gray-800"
      "items" (slice 
        (dict 
          "image" "/images/articles/mountain.jpg"
          "imageAlt" "Mountain landscape"
          "date" "2025-04-22"
          "dateDisplay" "Apr 22, 2025"
          "title" "Exploring the Himalayas: A Photographer's Journey"
          "titleLink" "/stories/himalayas-journey"
          "authorImage" "/images/team/alex.jpg"
          "authorName" "Alex Chen"
        )
      )
  ) }}
@note: This is the dark mode variant of the Three Column With Background Images component. It includes decorative background patterns and gradient effects that work well on dark backgrounds.
*/}}

{{/* Configurable variables */}}
{{ $bgColor := .bgColor | default "bg-gray-900" }}
{{ $padding := .padding | default "py-24 sm:py-32" }}

{{/* Heading section */}}
{{ $heading := .heading | default "From the blog" }}
{{ $headingColor := .headingColor | default "text-white" }}
{{ $description := .description | default "Learn how to grow your business with our expert advice." }}
{{ $descriptionColor := .descriptionColor | default "text-gray-300" }}
{{ $centerHeading := .centerHeading | default true }}

{{/* Items */}}
{{ $items := .items | default (slice 
  (dict 
    "image" "https://images.unsplash.com/photo-1496128858413-b36217c2ce36?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3603&q=80"
    "imageAlt" "Blog post image"
    "date" "2020-03-16"
    "dateDisplay" "Mar 16, 2020"
    "title" "Boost your conversion rate"
    "titleLink" "#"
    "authorImage" "https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
    "authorName" "Michael Foster"
  )
  (dict 
    "image" "https://images.unsplash.com/photo-1547586696-ea22b4d4235d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3603&q=80"
    "imageAlt" "Blog post image"
    "date" "2020-03-10"
    "dateDisplay" "Mar 10, 2020"
    "title" "How to use search engine optimization to drive sales"
    "titleLink" "#"
    "authorImage" "https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
    "authorName" "Lindsay Walton"
  )
  (dict 
    "image" "https://images.unsplash.com/photo-1492724441997-5dc865305da7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3603&q=80"
    "imageAlt" "Blog post image"
    "date" "2020-02-12"
    "dateDisplay" "Feb 12, 2020"
    "title" "Improve your customer experience"
    "titleLink" "#"
    "authorImage" "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
    "authorName" "Courtney Henry"
  )
) }}

{{/* Item styling */}}
{{ $cardBgColor := .cardBgColor | default "bg-gray-800" }}
{{ $cardPadding := .cardPadding | default "px-8 pt-80 pb-8 sm:pt-48 lg:pt-80" }}
{{ $gradientOverlay := .gradientOverlay | default "bg-gradient-to-t from-gray-900 via-gray-900/40" }}
{{ $ringColor := .ringColor | default "ring-white/10" }}
{{ $titleColor := .titleColor | default "text-white" }}
{{ $dateColor := .dateColor | default "text-gray-300" }}
{{ $authorColor := .authorColor | default "text-gray-300" }}
{{ $authorImageBg := .authorImageBg | default "bg-white/10" }}

<div class="relative isolate overflow-hidden {{ $bgColor }} {{ $padding }}">
  <!-- Background pattern -->
  <svg class="absolute inset-0 -z-10 h-full w-full stroke-white/10 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]" aria-hidden="true">
    <defs>
      <pattern id="983e3e4c-de6d-4c3f-8d64-b9761d1534cc" width="200" height="200" x="50%" y="-1" patternUnits="userSpaceOnUse">
        <path d="M.5 200V.5H200" fill="none" />
      </pattern>
    </defs>
    <rect width="100%" height="100%" stroke-width="0" fill="url(#983e3e4c-de6d-4c3f-8d64-b9761d1534cc)" />
  </svg>
  
  <div class="absolute left-[calc(50%-4rem)] top-10 -z-10 transform-gpu blur-3xl sm:left-[calc(50%-18rem)] lg:left-48 lg:top-[calc(50%-30rem)] xl:left-[calc(50%-24rem)]" aria-hidden="true">
    <div class="aspect-[1108/632] w-[69.25rem] bg-gradient-to-r from-[#80caff] to-[#4f46e5] opacity-20" style="clip-path: polygon(73.6% 51.7%, 91.7% 11.8%, 100% 46.4%, 97.4% 82.2%, 92.5% 84.9%, 75.7% 64%, 55.3% 47.5%, 46.5% 49.4%, 45% 62.9%, 50.3% 87.2%, 21.3% 64.1%, 0.1% 100%, 5.4% 51.1%, 21.4% 63.9%, 58.9% 0.2%, 73.6% 51.7%)"></div>
  </div>

  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto max-w-2xl {{ if $centerHeading }}text-center{{ end }}">
      <h2 class="text-4xl font-semibold tracking-tight text-balance {{ $headingColor }} sm:text-5xl">{{ $heading }}</h2>
      <p class="mt-2 text-lg/8 {{ $descriptionColor }}">{{ $description }}</p>
    </div>
    <div class="mx-auto mt-16 grid max-w-2xl auto-rows-fr grid-cols-1 gap-8 sm:mt-20 lg:mx-0 lg:max-w-none lg:grid-cols-3">
      {{ range $items }}
      <article class="relative isolate flex flex-col justify-end overflow-hidden rounded-2xl {{ $cardBgColor }} {{ $cardPadding }}">
        {{ if .image }}
          {{ partial "components/media/lazyimg.html" (dict 
            "src" .image 
            "alt" .imageAlt
            "class" "absolute inset-0 -z-10 size-full object-cover"
          ) }}
        {{ end }}
        <div class="absolute inset-0 -z-10 {{ $gradientOverlay }}"></div>
        <div class="absolute inset-0 -z-10 rounded-2xl ring-1 {{ $ringColor }} ring-inset"></div>

        <div class="flex flex-wrap items-center gap-y-1 overflow-hidden text-sm/6 {{ $dateColor }}">
          {{ if .date }}<time datetime="{{ .date }}" class="mr-8">{{ .dateDisplay }}</time>{{ end }}
          {{ if .authorName }}
          <div class="-ml-4 flex items-center gap-x-4">
            <svg viewBox="0 0 2 2" class="-ml-0.5 size-0.5 flex-none fill-white/50">
              <circle cx="1" cy="1" r="1" />
            </svg>
            <div class="flex gap-x-2.5">
              {{ if .authorImage }}
                {{ partial "components/media/lazyimg.html" (dict 
                  "src" .authorImage 
                  "alt" .authorName
                  "class" "size-6 flex-none rounded-full {{ $authorImageBg }}"
                ) }}
              {{ end }}
              <span class="{{ $authorColor }}">{{ .authorName }}</span>
            </div>
          </div>
          {{ end }}
        </div>
        <h3 class="mt-3 text-lg/6 font-semibold {{ $titleColor }}">
          <a href="{{ .titleLink }}">
            <span class="absolute inset-0"></span>
            {{ .title }}
          </a>
        </h3>
      </article>
      {{ end }}
    </div>
  </div>
</div>
